{"version":3,"sources":["pages/ImageGridContainer.jsx","assets/svgIcons.jsx","utils/context.js","components/FramedModal.jsx","utils/utils.js","utils/hooks.js","components/ImageGrid.jsx","components/AboutModalContent.jsx","components/SearchFilter.jsx","components/AdvancedSearch.jsx","components/ImageNav.jsx","components/SocialLinks.jsx","components/Spinner.jsx","components/ImageViewer.jsx","api/request.js","App.js","reportWebVitals.js","index.js"],"names":["timer","SortUp","className","xmlns","width","height","viewBox","fill","d","SortDown","FramedIcon","x","y","Menu","Fullscreen","points","Cancel","ExitFullscreen","Flickr","About","Steam","Twitter","Instagram","Globe","NextArrow","ModalContext","createContext","show","component","withClose","SiteDataContext","imageData","authorData","searchData","FramedModal","onClose","visibleClass","undefined","useContext","modal","setModal","handleClose","React","useCallback","document","fullScreen","mozFullScreen","webkitIsFullScreen","msFullscreenElement","exitFullscreen","classNames","onClick","event","stopPropagation","baseSearchData","minDate","Date","maxDate","numberHelpers","label","hint","operator","searchOptions","property","type","helperText","entries","helpers","range","scrolledToBottom","el","buffer","getBoundingClientRect","bottom","window","innerHeight","breakpoints","getBrowserFullscreenElementProp","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","Error","getRange","key","data","sortedData","sort","a","b","length","generateSearchData","searchWithEntries","filter","item","hasOwnProperty","searchOption","includes","push","getSearchKey","index","findIndex","e","getSearchDataByType","map","useViewport","actualWidth","documentElement","clientWidth","body","useState","setWidth","onWindowLoad","useEffect","resizeTimeout","setTimeout","handleWindowResize","windowWidth","clearTimeout","addEventListener","removeEventListener","useOutsideAlerter","ref","onClickOutside","handleClickOutside","current","contains","target","ImageGrid","images","rowTargetHeight","borderOffset","maxWidth","makeSmaller","image","amount","newHeight","getCumulativeWidth","i","buildRows","currentRow","currentWidth","imageCounter","rows","processedImages","parseInt","id","author","authorid","authorsAvatarUrl","epochtime","game","score","shotUrl","spoiler","thumbnailUrl","processImages","normalizeImages","fitImagesInRow","difference","amountOfImages","addToEach","n","style","paddingLeft","paddingTop","row","imageIndex","marginRight","marginBottom","alt","gameName","src","Math","ceil","cursor","display","renderGrid","buildGrid","AboutModalContent","href","SearchFilter","props","state","startAnimate","this","timeoutId","setState","bind","text","normalClass","class","PureComponent","AdvancedSearch","handleSearchFocus","handleSearchBlur","updateFilters","updateSearch","focused","searchText","filters","isMobile","delimiter","convertTextToFilters","currentFilters","indexOf","newFilters","slice","substring","remaining","processSearchInput","inputValue","trimStart","concat","handleKeyboard","getSearchOptionText","delimiterIndex","substr","addDate","value","isoValue","toISOString","dateValue","searchOptionText","searchInputRef","focus","renderEntries","searchTermText","toLowerCase","limitEntries","addHelper","activeClass","focusedClass","advancedSearchRef","useRef","filterText","filterPlaceholder","name","onChange","split","placeholder","autoComplete","onFocus","validSearchOptions","addSearchOption","renderSearchOptions","searchKey","isOpen","closeCalendar","renderDatePicker","searchOptionIndex","searchOptionData","showOperators","addOperator","min","max","renderSearchHelpers","filterToRemove","splice","removeFilter","memo","ImageNav","options","reverseSort","updateSort","updateFormat","onLogoClick","searchProps","active","setActive","setType","searchFocused","setSearchFocused","history","useHistory","formats","icon","renderSearch","renderSort","isActive","buttonClass","selection","renderFilters","hiddenClass","checked","htmlFor","aboutIconButton","showMenu","setShowMenu","viewportClass","mobileMenuRef","mobileMenuClass","renderMobile","SocialLinks","renderSocials","linkList","social","socialText","url","start","newURL","end","extractTopLevelDomain","link","rel","title","authorSocials","otherSocials","othersocials","Spinner","modifier","baseClass","svgSpinner","cx","cy","r","spinner","modifierClass","spinnerContainer","initialState","initialized","loadedState","showImage","authorExpanded","reducer","action","ImageViewer","isFullscreen","setIsFullscreen","fullScreenError","onPrev","onNext","setBgImage","useReducer","dispatch","imageViewerContent","elRef","useLayoutEffect","onfullscreenchange","requestFullscreen","then","catch","useFullscreenStatus","prevDisabled","nextDisabled","fullscreenClass","blurClass","loadedClass","viewerClass","socialData","find","authorNick","handlePrev","handleNext","handlers","useSwipeable","onSwipedLeft","onSwipedRight","onSwiping","dir","left","deltaX","onSwiped","delta","preventDefaultTouchmoveEvent","trackTouch","trackMouse","rotationAngle","disabled","onLoad","sortOptions","ImageGridContainer","pageSize","imageId","sortOption","format","showViewer","viewerSrc","isReverse","waiting","page","siteData","moreImagesToLoad","isBottom","moreImageToLoad","setIsBottom","onScroll","wrappedElement","useScrollPosition","useMemo","strings","numbers","loadImageFromQueryString","updateImageParam","search","location","params","URLSearchParams","delete","append","toString","applyFilter","dataToSearch","newSearchTerm","replace","searchKeyResult","newSearchOption","searchItem","getOperator","parsedNumberTerm","term","termToParse","parseNumberTerm","obj","Object","keys","reduce","acc","curr","results","loadMore","paginate","filteredImages","totalImagesToLoad","filterImages","sortMethod","paginatedImages","Provider","option","scrollTo","top","behavior","uniqueFilters","pos","axios","require","normalizeData","noramlizedData","_default","forEach","attributes","App","setSiteData","setInitialized","bgImageContainer","setBgImageContainer","imageIdParam","param","get","getQueryParam","setBackground","imageObject","bgImage","backgroundImage","getData","imagesResponse","authorsResponse","normalizedImages","normalizedAuthors","authorName","epochTime","populatedSearchData","querySelector","randomImageIndex","floor","random","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","createBrowserHistory","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1ce5c5d2.chunk.js","sourcesContent":["import React, { useCallback, useContext, useEffect, useReducer, useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport FramedModal from '../components/FramedModal';\nimport ImageGrid from '../components/ImageGrid';\nimport ImageNav from '../components/ImageNav';\nimport ImageViewer from '../components/ImageViewer';\nimport { ModalContext, SiteDataContext } from '../utils/context';\nimport { useScrollPosition } from '../utils/hooks';\nimport { getOperator, getSearchDataByType, getSearchKey, scrolledToBottom } from '../utils/utils';\n//import { getQueryParam, scrolledToBottom } from '../utils/utils';\n\nconst sortOptions = [\n  {\n    label: 'Date',\n    key: 'epochtime',\n  },\n  {\n    label: 'Popularity',\n    key: 'score',\n  },\n];\n\nlet timer;\n\nconst ImageGridContainer = ({ pageSize, setBgImage, imageId }) => {\n  //const searchQuery = getQueryParam('search');\n\n  // component state\n  const initialState = {\n    images: [],\n    sortOption: sortOptions[0],\n    format: 'all',\n    searchText: '',\n    filters: [],\n    showViewer: false,\n    viewerSrc: null,\n    isReverse: false,\n    waiting: false,\n    page: 1,\n  };\n\n  const reducer = (state, action) => {\n    switch (action.type) {\n      case 'reset':\n        return { \n          ...state, \n          sortOption:sortOptions[0], \n          format: 'all',\n          filters: [],\n          searchText: '',\n          showViewer: false,\n          viewerSrc: null,\n          isReverse: false,\n          page: 1\n        };\n      case 'loadMoreImages':\n        return { ...state, waiting: true, page: action.page };\n      case 'doneWaiting':\n        return { ...state, waiting: false };\n      case 'setPage':\n        return { ...state, waiting: true, page: action.page };\n      case 'changeFormat':\n        return { ...state, page: 1, waiting: true, ...action };\n      case 'close':\n        return { ...state, viewerSrc: null, showViewer: false };\n      case 'setSearchText':\n          return { ...state, searchText: action.text };  \n      case 'setSearchFilters':\n        return { ...state, filters: action.filters };\n      case 'setImages':\n        return { ...state, images: action.images };\n      case 'selectImage':\n        return { ...state, viewerSrc: action.image, showViewer: true };\n      case 'loadImage':\n        return { initialized: true, loadedState: true, showImage: true };\n      case 'changeSort':\n        return {\n          ...state,\n          page: 1,\n          waiting: true,\n          sortOption: action.sortOption,\n          isReverse: action.isReverse,\n        };\n      default:\n        return state;\n    }\n  };\n\n  const [\n    { images, sortOption, format, filters, searchText, showViewer, viewerSrc, isReverse, waiting, page },\n    dispatch,\n  ] = useReducer(reducer, {\n    ...initialState,\n  });\n\n  // context\n  const [modal, setModal] = useState({\n    show: false,\n    component: null,\n    className: '',\n    withClose: true,\n  });\n  const siteData = useContext(SiteDataContext);\n\n  // component variables\n  const { imageData, searchData } = siteData;\n\n  const moreImagesToLoad = page * pageSize <= images.length;\n  const isBottom = useScrollPosition(moreImagesToLoad);\n  const history = useHistory();\n  const searchOptions = React.useMemo(()=>{\n    return {\n      strings : getSearchDataByType('string'),\n      numbers : getSearchDataByType('number')\n    }\n  }, []);\n\n  // component methods\n  const loadImageFromQueryString = useCallback(() => {\n    const imageIndex = imageData.findIndex((e) => e.epochtime === imageId);\n    const image = imageData[imageIndex];\n    dispatch({type: 'selectImage', image, showViewer: true})\n  }, [imageData, imageId]);\n\n  const checkLoadMore = () => {\n    if (isBottom && !waiting) {\n      loadMore();\n    }\n  };\n\n  const handleClose = () => {\n    updateImageParam();\n\n    if (modal.className !== 'author-social-content') {\n      dispatch({ type: 'close' });\n    }\n    setModal({ ...modal, className: '', component: null, show: false });\n  };\n\n  const handleSortChange = (option) => {\n    if (option.key === sortOption.key) {\n      dispatch({ type: 'changeSort', isReverse: !isReverse, sortOption });\n    } else {\n      dispatch({ type: 'changeSort', isReverse: false, sortOption: option });\n    }\n    window.scrollTo({ top: 0 });\n  };\n\n  const handleFormatChange = (format) => {\n    dispatch({ type: 'changeFormat', format });\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleSearchChange = (text) => {\n    dispatch({ type: 'setSearchText', text });\n  };\n\n  const handleFilterChange = (newFilters) => {\n    const filterFunc = (item, pos) => newFilters.indexOf(item) === pos;\n    const uniqueFilters = newFilters.filter(filterFunc);\n    dispatch({ type: 'setSearchFilters', filters:uniqueFilters });\n  };\n\n  const updateImageParam = (id) => {\n    const search = window.location.search;\n    const params = new URLSearchParams(search);\n    params.delete(\"imageId\");\n    if (id) {\n      params.append(\"imageId\", id)\n    } \n    history.push({search: params.toString()})\n  }\n\n  const handleImageClick = (image) => {\n    updateImageParam(image.epochtime);\n\n    dispatch({ type: 'selectImage', image });\n  };\n\n  const parseNumberTerm = (type, term) => {\n    let termToParse = term.indexOf('<') !== -1\n    ? term.substr(term.indexOf('<') + 1)\n    : term.substr(term.indexOf('>') + 1);\n\n    if (type === 'epochtime') {\n      termToParse = +new Date(termToParse)/1000;\n    }\n    \n    return parseInt(termToParse, 10);\n  }\n\n  const applyFilter = useCallback((filter, dataToSearch) => {\n    const filterText = filter.trimStart();\n    if (filterText?.length < 3) {\n      return dataToSearch;\n    }\n    const delimiterIndex = filterText.indexOf(':');\n    let searchOption = filterText.substring(0, delimiterIndex).toLowerCase();\n    let newSearchTerm = filterText.substring(delimiterIndex + 1).replace(/\\s+/g, '');;\n\n    // ugly logic, will fix later\n    const searchKeyResult = getSearchKey(searchOption);\n    const newSearchOption = searchKeyResult ? searchKeyResult : searchOption;\n\n    if (searchOptions.strings.includes(newSearchOption)) {\n      return dataToSearch.filter((imageData) => {\n        // if more than 1 char, search for the tag after lowercasing and removing spaces, else return data (nothing)\n        return newSearchTerm?.length >= 3\n          ? imageData[newSearchOption].replace(/\\s+/g, '').toLowerCase().includes(newSearchTerm.toLowerCase())\n          : dataToSearch;\n      });\n    } else if (searchOptions.numbers.includes(newSearchOption)) {\n      const operator = getOperator(searchOption);\n      let parsedNumberTerm = parseNumberTerm(newSearchOption, newSearchTerm);\n\n      return dataToSearch.filter((obj) => {\n        return operator === '<' || newSearchTerm.indexOf('<') > -1\n            ? obj[newSearchOption] <= parsedNumberTerm\n            : obj[newSearchOption] >= parsedNumberTerm\n      });\n    } \n    // simple text search\n    return dataToSearch.filter((imageData) => {\n      return Object.keys(imageData).reduce((acc, curr) => {\n        return acc || imageData[curr].toString().toLowerCase().includes(filterText.toLowerCase());\n      }, false);\n    });\n  }, [searchOptions])\n\n  const search = useCallback((data) => {\n    let results = data.slice();\n\n    for (const filter of filters) {\n      results = applyFilter(filter, results)\n    }\n\n    return results;\n  }, [applyFilter, filters]);\n\n  const loadMore = () => {\n    if (scrolledToBottom(document.body, 50)) {\n      dispatch({ type: 'loadMoreImages', page: page + 1 });\n    }\n  };\n\n  const paginate = useCallback(\n    (filteredImages) => {\n      const totalImagesToLoad = pageSize * page;\n      if (totalImagesToLoad > filteredImages.length) {\n        return filteredImages;\n      } else {\n        return filteredImages.slice(0, totalImagesToLoad);\n      }\n    },\n    [page, pageSize],\n  );\n\n  const filterImages = useCallback(\n    (images) => {\n      let results = images;\n      const key = sortOption.key;\n\n      let sortMethod = (a, b) => (a[key] < b[key] ? 1 : b[key] < a[key] ? -1 : 0);\n      if (isReverse) {\n        sortMethod = (a, b) => (a[key] > b[key] ? 1 : b[key] > a[key] ? -1 : 0);\n      }\n      results = images.sort(sortMethod);\n\n      if (format === 'Wide') {\n        results = results.filter((item) => item.width > item.height);\n      } else if (format === 'Portrait') {\n        results = results.filter((item) => item.width <= item.height);\n      }\n      return filters.length ? search(results) : results;\n    },\n    [isReverse, search, sortOption, format, filters.length],\n  );\n\n  const selectPreviousImage = () => {\n    const index = images.findIndex((e) => e.epochtime === viewerSrc.epochtime);\n    if (index - 1 >= 0) {\n      updateImageParam(images[index - 1].epochtime);\n      dispatch({ type: 'selectImage', image: images[index - 1] });\n    }\n  };\n\n  const selectNextImage = () => {\n    const index = images.findIndex((e) => e.epochtime === viewerSrc.epochtime);\n    if (index + 1 <= images.length) {\n      updateImageParam(images[index + 1].epochtime);\n      dispatch({ type: 'selectImage', image: images[index + 1] });\n    }\n  };\n\n  const noSearchResults = () => {\n    return filters.length > 0 && !images.length ? (\n      <div className=\"no-search-results\">There are no images matching your search criteria</div>\n    ) : null;\n  };\n\n  useEffect(() => {\n    if (imageData.length) {\n      const filteredImages = filterImages(imageData.slice());\n\n      const paginatedImages = paginate(filteredImages);\n\n      dispatch({ type: 'setImages', images: paginatedImages });\n    }\n\n    if (waiting) {\n      clearTimeout(timer);\n      timer = setTimeout(() => dispatch({ type: 'doneWaiting' }), 2000);\n    }\n  }, [\n    imageData,\n    sortOption,\n    format,\n    isReverse,\n    filterImages,\n    showViewer,\n    paginate,\n    waiting\n  ]);\n\n  useEffect(() => {\n    if (imageData.length && imageId !== null) {\n      loadImageFromQueryString();\n    }\n  }, [imageData, imageId, loadImageFromQueryString]);\n\n  moreImagesToLoad && checkLoadMore();\n\n  return (\n    <div className=\"home\">\n      <ModalContext.Provider value={{ modal, setModal }}>\n        <ImageNav\n          className={showViewer || modal.show ? 'hidden' : ''}\n          options={sortOptions}\n          reverseSort={isReverse}\n          updateSort={handleSortChange}\n          updateFormat={handleFormatChange}\n          onLogoClick={()=> dispatch({type:'reset'})}\n          searchProps={{\n            searchData,\n            updateSearch: handleSearchChange,\n            updateFilters: handleFilterChange,\n            searchText,\n            filters\n          }}\n        />\n        {imageData && (\n          <ImageGrid\n            className=\"image-rows\"\n            images={images}\n            rowTargetHeight={400}\n            onClick={handleImageClick}\n            borderOffset={7}\n          />\n        )}\n        {noSearchResults()}\n        <ImageViewer\n          image={viewerSrc}\n          show={showViewer}\n          onClose={handleClose}\n          data={images}\n          onPrev={selectPreviousImage}\n          onNext={selectNextImage}\n          setBgImage={setBgImage}\n        />\n        <FramedModal\n          onClose={handleClose}\n          className={modal.className}\n          show={modal.show}\n          component={modal.component}\n        />\n      </ModalContext.Provider>\n    </div>\n  );\n};\nexport default React.memo(ImageGridContainer);\n","export const SortUp = () => {\n  return (\n    <div className=\"sort-icon\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"10\"\n        viewBox=\"0 0 292 292\"\n        fill=\"#fff\"\n      >\n        <g>\n          <path\n            d=\"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\n                C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\n                c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z\"\n          />\n        </g>\n      </svg>\n\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"10\"\n        viewBox=\"0 0 292 292\"\n        fill=\"#aaa\"\n      >\n        <g>\n          <path\n            d=\"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\n            C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\n            s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z\"\n          />\n        </g>\n      </svg>\n    </div>\n  );\n};\n\nexport const SortDown = () => {\n  return (\n    <div className=\"sort-icon\">\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"10\"\n        viewBox=\"0 0 292 292\"\n        fill=\"#aaa\"\n      >\n        <g>\n          <path\n            d=\"M286.935,197.286L159.028,69.379c-3.613-3.617-7.895-5.424-12.847-5.424s-9.233,1.807-12.85,5.424L5.424,197.286\n                C1.807,200.9,0,205.184,0,210.132s1.807,9.233,5.424,12.847c3.621,3.617,7.902,5.428,12.85,5.428h255.813\n                c4.949,0,9.233-1.811,12.848-5.428c3.613-3.613,5.427-7.898,5.427-12.847S290.548,200.9,286.935,197.286z\"\n          />\n        </g>\n      </svg>\n\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"10\"\n        height=\"10\"\n        viewBox=\"0 0 292 292\"\n        fill=\"#fff\"\n      >\n        <g>\n          <path\n            d=\"M286.935,69.377c-3.614-3.617-7.898-5.424-12.848-5.424H18.274c-4.952,0-9.233,1.807-12.85,5.424\n            C1.807,72.998,0,77.279,0,82.228c0,4.948,1.807,9.229,5.424,12.847l127.907,127.907c3.621,3.617,7.902,5.428,12.85,5.428\n            s9.233-1.811,12.847-5.428L286.935,95.074c3.613-3.617,5.427-7.898,5.427-12.847C292.362,77.279,290.548,72.998,286.935,69.377z\"\n          />\n        </g>\n      </svg>\n    </div>\n  );\n};\n\nexport const FramedIcon = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0\" y=\"0\" viewBox=\"0 0 2048 2048\" fill=\"#9A9A9A\">\n    <g>\n      <g>\n        <path d=\"M892.3,688v242h539v247.2h-539v411.9H609.1v-1150h889.1V688H892.3z\" />\n      </g>\n    </g>\n    <path d=\"M143.6,138.5v1760.9h1760.9V138.5H143.6z M1783.8,1778.7H264.2V259.2h1519.6V1778.7z\" />\n  </svg>\n);\n\nexport const Menu = () => (\n  <svg viewBox=\"0 0 80 80\" width=\"40\" height=\"30\" fill=\"#fff\">\n    <rect y=\"15\" width=\"80\" height=\"10\"></rect>\n    <rect y=\"35\" width=\"80\" height=\"10\"></rect>\n    <rect y=\"55\" width=\"80\" height=\"10\"></rect>\n  </svg>\n);\n\nexport const Fullscreen = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n    <polygon points=\"68.284,40 165,40 165,0 0,0 0,165 40,165 40,68.284 177,205.284 205.284,177\" />\n    <polygon points=\"205.284,335 177,306.716 40,443.716 40,347 0,347 0,512 165,512 165,472 68.284,472\" />\n    <polygon points=\"347,0 347,40 443.716,40 306.716,177 335,205.284 472,68.284 472,165 512,165 512,0\" />\n    <polygon points=\"472,347 472,443.716 335,306.716 306.716,335 443.716,472 347,472 347,512 512,512 512,347\" />\n  </svg>\n);\n\nexport const Cancel = ({className}) => (\n  <svg className={className} xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n    <path\n      d=\"M21 4.41L19.59 3 12 10.59 4.41 3 3 4.41 10.59 12 3 19.59 4.41 21 12 13.41 19.59 21 21 19.59 13.41 12 21 4.41z\"\n    />\n  </svg>\n);\n\nexport const ExitFullscreen = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 32 32\">\n    <polygon points=\"22.586,25.414 29.172,32 32,29.172 25.414,22.586 28,20 20,20 20,28\" />\n    <polygon points=\"6.547,9.371 4,12 11.961,11.957 12,4 9.375,6.543 2.828,0 0,2.828\" />\n    <polygon points=\"0,29.172 2.828,32 9.414,25.414 12,28 12,20 4,20 6.586,22.586\" />\n    <polygon points=\"28.031,12 25.438,9.404 32,2.838 29.164,0 22.598,6.566 20,3.971 20,12\" />\n  </svg>\n);\n\nexport const Flickr = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 97.75 97.75\">\n    <g>\n      <path\n        d=\"M48.875,0C21.883,0,0,21.882,0,48.875S21.883,97.75,48.875,97.75S97.75,75.868,97.75,48.875S75.867,0,48.875,0z\n   M28.277,66.361c-8.895,0-16.105-7.828-16.105-17.486s7.211-17.487,16.105-17.487s16.106,7.829,16.106,17.487\n  S37.172,66.361,28.277,66.361z M69.008,65.945c-9.152,0-16.57-7.735-16.57-17.279c0-9.542,7.418-17.278,16.57-17.278\n  c9.15,0,16.57,7.736,16.57,17.278C85.578,58.21,78.158,65.945,69.008,65.945z\"\n      />\n    </g>\n  </svg>\n);\n\nexport const About = () => (\n  <svg viewBox=\"0 0 24 24\">\n    <path d=\"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z\" />\n  </svg>\n);\n\nexport const Steam = () => (\n  <svg viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"m17.903 1.75c-3.349 0-6.081 2.696-6.107 6.02l-3.803 5.427c-1.061-.096-1.976.123-2.785.614l-5.208-2.097v5.727l3.08 1.233c.445 2.039 2.278 3.576 4.447 3.576 2.358 0 4.312-1.803 4.527-4.099l5.855-4.259c3.359 0 6.091-2.711 6.091-6.073l-.001-.001c0-3.346-2.732-6.068-6.096-6.068zm-13.334 17.521c.546.208 1.098.437 1.645.651 1.367.56 2.92-.107 3.466-1.468.552-1.361-.118-2.897-1.483-3.442l-1.393-.56c2.074-.46 4.071 1.094 4.072 3.255-.001 1.852-4.678 4.608-6.307 1.564zm13.34-7.385c-2.261 0-4.098-1.815-4.098-4.067 0-2.242 1.832-4.067 4.098-4.067 2.245 0 4.082 1.825 4.082 4.067 0 2.258-1.838 4.073-4.082 4.067z\" />\n    <path d=\"m17.92 4.556c-1.805 0-3.267 1.457-3.267 3.255s1.457 3.255 3.267 3.255c1.794 0 3.267-1.452 3.267-3.255s-1.473-3.255-3.267-3.255z\" />\n  </svg>\n);\n\nexport const Twitter = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <g>\n      <g>\n        <path\n          d=\"M512,97.248c-19.04,8.352-39.328,13.888-60.48,16.576c21.76-12.992,38.368-33.408,46.176-58.016\n      c-20.288,12.096-42.688,20.64-66.56,25.408C411.872,60.704,384.416,48,354.464,48c-58.112,0-104.896,47.168-104.896,104.992\n      c0,8.32,0.704,16.32,2.432,23.936c-87.264-4.256-164.48-46.08-216.352-109.792c-9.056,15.712-14.368,33.696-14.368,53.056\n      c0,36.352,18.72,68.576,46.624,87.232c-16.864-0.32-33.408-5.216-47.424-12.928c0,0.32,0,0.736,0,1.152\n      c0,51.008,36.384,93.376,84.096,103.136c-8.544,2.336-17.856,3.456-27.52,3.456c-6.72,0-13.504-0.384-19.872-1.792\n      c13.6,41.568,52.192,72.128,98.08,73.12c-35.712,27.936-81.056,44.768-130.144,44.768c-8.608,0-16.864-0.384-25.12-1.44\n      C46.496,446.88,101.6,464,161.024,464c193.152,0,298.752-160,298.752-298.688c0-4.64-0.16-9.12-0.384-13.568\n      C480.224,136.96,497.728,118.496,512,97.248z\"\n        />\n      </g>\n    </g>\n  </svg>\n);\n\nexport const Instagram = () => (\n  <svg viewBox=\"0 0 511 511.9\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"m510.949219 150.5c-1.199219-27.199219-5.597657-45.898438-11.898438-62.101562-6.5-17.199219-16.5-32.597657-29.601562-45.398438-12.800781-13-28.300781-23.101562-45.300781-29.5-16.296876-6.300781-34.898438-10.699219-62.097657-11.898438-27.402343-1.300781-36.101562-1.601562-105.601562-1.601562s-78.199219.300781-105.5 1.5c-27.199219 1.199219-45.898438 5.601562-62.097657 11.898438-17.203124 6.5-32.601562 16.5-45.402343 29.601562-13 12.800781-23.097657 28.300781-29.5 45.300781-6.300781 16.300781-10.699219 34.898438-11.898438 62.097657-1.300781 27.402343-1.601562 36.101562-1.601562 105.601562s.300781 78.199219 1.5 105.5c1.199219 27.199219 5.601562 45.898438 11.902343 62.101562 6.5 17.199219 16.597657 32.597657 29.597657 45.398438 12.800781 13 28.300781 23.101562 45.300781 29.5 16.300781 6.300781 34.898438 10.699219 62.101562 11.898438 27.296876 1.203124 36 1.5 105.5 1.5s78.199219-.296876 105.5-1.5c27.199219-1.199219 45.898438-5.597657 62.097657-11.898438 34.402343-13.300781 61.601562-40.5 74.902343-74.898438 6.296876-16.300781 10.699219-34.902343 11.898438-62.101562 1.199219-27.300781 1.5-36 1.5-105.5s-.101562-78.199219-1.300781-105.5zm-46.097657 209c-1.101562 25-5.300781 38.5-8.800781 47.5-8.601562 22.300781-26.300781 40-48.601562 48.601562-9 3.5-22.597657 7.699219-47.5 8.796876-27 1.203124-35.097657 1.5-103.398438 1.5s-76.5-.296876-103.402343-1.5c-25-1.097657-38.5-5.296876-47.5-8.796876-11.097657-4.101562-21.199219-10.601562-29.398438-19.101562-8.5-8.300781-15-18.300781-19.101562-29.398438-3.5-9-7.699219-22.601562-8.796876-47.5-1.203124-27-1.5-35.101562-1.5-103.402343s.296876-76.5 1.5-103.398438c1.097657-25 5.296876-38.5 8.796876-47.5 4.101562-11.101562 10.601562-21.199219 19.203124-29.402343 8.296876-8.5 18.296876-15 29.398438-19.097657 9-3.5 22.601562-7.699219 47.5-8.800781 27-1.199219 35.101562-1.5 103.398438-1.5 68.402343 0 76.5.300781 103.402343 1.5 25 1.101562 38.5 5.300781 47.5 8.800781 11.097657 4.097657 21.199219 10.597657 29.398438 19.097657 8.5 8.300781 15 18.300781 19.101562 29.402343 3.5 9 7.699219 22.597657 8.800781 47.5 1.199219 27 1.5 35.097657 1.5 103.398438s-.300781 76.300781-1.5 103.300781zm0 0\" />\n    <path d=\"m256.449219 124.5c-72.597657 0-131.5 58.898438-131.5 131.5s58.902343 131.5 131.5 131.5c72.601562 0 131.5-58.898438 131.5-131.5s-58.898438-131.5-131.5-131.5zm0 216.800781c-47.097657 0-85.300781-38.199219-85.300781-85.300781s38.203124-85.300781 85.300781-85.300781c47.101562 0 85.300781 38.199219 85.300781 85.300781s-38.199219 85.300781-85.300781 85.300781zm0 0\" />\n    <path d=\"m423.851562 119.300781c0 16.953125-13.746093 30.699219-30.703124 30.699219-16.953126 0-30.699219-13.746094-30.699219-30.699219 0-16.957031 13.746093-30.699219 30.699219-30.699219 16.957031 0 30.703124 13.742188 30.703124 30.699219zm0 0\" />\n  </svg>\n);\n\nexport const Globe = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 479.447 479.447\">\n    <g>\n      <g>\n        <path\n          d=\"M239.446,0.022c-8.594,0-17.182,0.462-25.727,1.383c-7.832,0.8-15.568,2.112-23.2,3.704\n    c-1.477,0.309-2.955,0.635-4.432,0.976C141.12,16.323,100.06,39.314,67.831,72.301c-2.997,3.072-5.931,6.235-8.8,9.488\n    c-87.06,99.948-76.612,251.548,23.337,338.608c95.688,83.349,239.723,77.803,328.719-12.656c3.003-3.072,5.936-6.235,8.8-9.488\n    c38.421-43.754,59.594-100.003,59.56-158.232C479.447,107.472,371.995,0.021,239.446,0.022z M78.495,84.301\n    c1.264-1.312,2.576-2.568,3.864-3.84c1.488-1.464,2.968-2.936,4.488-4.352c1.336-1.248,2.712-2.448,4.08-3.664\n    c1.544-1.368,3.08-2.736,4.664-4.056c1.392-1.176,2.824-2.304,4.248-3.44c1.6-1.28,3.2-2.56,4.848-3.792\n    c1.456-1.096,2.936-2.16,4.424-3.2c1.656-1.184,3.32-2.4,5.008-3.504c1.512-1.024,3.04-2.016,4.576-3\n    c1.712-1.096,3.432-2.176,5.168-3.2c1.563-0.933,3.136-1.851,4.72-2.752c1.771-1.008,3.549-1.992,5.336-2.952\n    c1.6-0.853,3.2-1.688,4.8-2.504c1.824-0.92,3.664-1.808,5.512-2.68c1.6-0.76,3.264-1.52,4.912-2.24c1.88-0.8,3.784-1.6,5.688-2.4\n    c1.656-0.68,3.304-1.344,4.976-1.984c1.936-0.736,3.896-1.424,5.856-2.112c1.672-0.584,3.344-1.168,5.04-1.72\n    c1.992-0.64,4-1.232,6.016-1.816c1.688-0.488,3.36-0.992,5.056-1.448c0.648-0.168,1.296-0.304,1.944-0.472\n    c-23.68,22.993-41.253,51.529-51.128,83.024c-18.988-5.008-37.37-12.082-54.816-21.096C78.039,84.821,78.263,84.541,78.495,84.301\n    z M66.991,97.181c19.217,10.412,39.595,18.522,60.712,24.16c-10.352,35.996-15.786,73.227-16.152,110.68h-95.92\n    C17.374,182.632,35.435,135.214,66.991,97.181z M66.991,382.861c-31.554-38.034-49.615-85.452-51.36-134.84h95.92\n    c0.366,37.453,5.799,74.684,16.152,110.68C106.587,364.341,86.209,372.45,66.991,382.861z M181.727,456.429\n    c-1.616-0.408-3.288-0.936-4.952-1.424c-2.024-0.592-4.056-1.184-6.056-1.832c-1.688-0.544-3.352-1.128-5.016-1.712\n    c-1.968-0.68-3.936-1.376-5.88-2.12c-1.664-0.632-3.304-1.296-4.952-1.968c-1.912-0.8-3.824-1.6-5.72-2.4\n    c-1.632-0.72-3.256-1.461-4.872-2.224c-1.864-0.88-3.72-1.776-5.6-2.704c-1.6-0.8-3.2-1.6-4.8-2.472\n    c-1.808-0.968-3.6-1.96-5.392-2.984c-1.6-0.888-3.12-1.8-4.664-2.728c-1.76-1.056-3.488-2.144-5.216-3.256\n    c-1.52-0.968-3.04-1.952-4.536-2.96c-1.704-1.152-3.392-2.352-5.064-3.552c-1.464-1.048-2.928-2.096-4.368-3.2\n    c-1.656-1.248-3.28-2.536-4.896-3.832c-1.416-1.128-2.824-2.248-4.208-3.408c-1.6-1.328-3.144-2.712-4.696-4.088\n    c-1.36-1.208-2.728-2.4-4.056-3.632c-1.528-1.424-3.008-2.904-4.496-4.368c-1.288-1.272-2.6-2.528-3.864-3.832\n    c-0.232-0.248-0.456-0.504-0.688-0.744c17.445-9.018,35.827-16.095,54.816-21.104c9.877,31.494,27.449,60.029,51.128,83.024\n    C183.031,456.741,182.375,456.605,181.727,456.429z M231.447,463.389c-34.232-4.864-64.24-40.592-83.12-93.352\n    c27.296-6.112,55.151-9.391,83.12-9.784V463.389z M231.447,344.253c-29.67,0.39-59.215,3.914-88.144,10.512\n    c-10.045-34.707-15.344-70.615-15.752-106.744h103.896V344.253z M231.447,232.021H127.551\n    c0.407-36.129,5.706-72.037,15.752-106.744c28.929,6.597,58.475,10.121,88.144,10.512V232.021z M231.447,119.789\n    c-27.97-0.39-55.824-3.669-83.12-9.784c18.88-52.76,48.888-88.488,83.12-93.352V119.789z M411.903,97.181\n    c31.554,38.034,49.615,85.452,51.36,134.84h-95.92c-0.366-37.453-5.799-74.684-16.152-110.68\n    C372.307,115.7,392.685,107.591,411.903,97.181z M297.103,23.605c1.68,0.416,3.352,0.944,5.016,1.432\n    c2.024,0.592,4.056,1.184,6.056,1.832c1.688,0.544,3.352,1.128,5.016,1.712c1.968,0.68,3.936,1.376,5.88,2.12\n    c1.664,0.632,3.304,1.296,4.952,1.968c1.912,0.8,3.824,1.6,5.72,2.4c1.632,0.72,3.256,1.461,4.872,2.224\n    c1.864,0.88,3.72,1.776,5.6,2.704c1.6,0.8,3.2,1.6,4.8,2.472c1.808,0.968,3.6,1.96,5.392,2.984c1.6,0.888,3.12,1.8,4.664,2.728\n    c1.76,1.056,3.488,2.144,5.216,3.256c1.52,0.968,3.04,1.952,4.536,2.96c1.704,1.152,3.384,2.344,5.056,3.544\n    c1.472,1.048,2.936,2.104,4.384,3.2c1.648,1.24,3.264,2.528,4.888,3.824c1.408,1.12,2.824,2.24,4.208,3.408\n    c1.6,1.328,3.144,2.712,4.696,4.088c1.36,1.208,2.728,2.4,4.056,3.632c1.528,1.424,3.008,2.904,4.496,4.368\n    c1.288,1.272,2.6,2.528,3.864,3.832c0.232,0.248,0.456,0.504,0.688,0.744c-17.445,9.018-35.827,16.095-54.816,21.104\n    c-9.896-31.498-27.491-60.031-51.192-83.016C295.799,23.293,296.455,23.429,297.103,23.605z M247.447,16.653\n    c34.232,4.864,64.24,40.592,83.12,93.352c-27.296,6.112-55.151,9.391-83.12,9.784V16.653z M247.447,135.789\n    c29.67-0.39,59.215-3.914,88.144-10.512c10.045,34.707,15.344,70.615,15.752,106.744H247.447V135.789z M247.447,248.021h103.896\n    c-0.407,36.129-5.706,72.037-15.752,106.744h0c-28.929-6.597-58.474-10.121-88.144-10.512V248.021z M247.447,463.389V360.253\n    c27.97,0.39,55.824,3.669,83.12,9.784C311.687,422.797,281.679,458.525,247.447,463.389z M400.399,395.741\n    c-1.264,1.304-2.568,2.56-3.856,3.832c-1.488,1.464-2.976,2.944-4.504,4.368c-1.328,1.24-2.696,2.4-4.056,3.64\n    c-1.552,1.376-3.096,2.752-4.68,4.08c-1.4,1.168-2.824,2.296-4.248,3.432c-1.6,1.28-3.2,2.56-4.848,3.792\n    c-1.456,1.096-2.936,2.16-4.424,3.2c-1.656,1.184-3.32,2.4-5.008,3.504c-1.512,1.024-3.04,2.016-4.576,2.992\n    c-1.712,1.104-3.437,2.171-5.176,3.2c-1.6,0.936-3.128,1.848-4.704,2.752c-1.771,1.008-3.552,1.992-5.344,2.952\n    c-1.6,0.853-3.2,1.688-4.8,2.504c-1.824,0.92-3.664,1.808-5.512,2.68c-1.6,0.76-3.264,1.52-4.912,2.24\n    c-1.88,0.8-3.784,1.6-5.688,2.4c-1.656,0.672-3.304,1.344-4.968,1.976c-1.952,0.744-3.912,1.44-5.88,2.12\n    c-1.664,0.584-3.328,1.168-5.016,1.712c-2,0.648-4,1.24-6.04,1.824c-1.672,0.496-3.352,0.992-5.04,1.448\n    c-0.648,0.168-1.296,0.304-1.944,0.472c23.68-22.993,41.253-51.529,51.128-83.024c18.988,5.008,37.37,12.082,54.816,21.096\n    C400.855,395.221,400.631,395.501,400.399,395.741z M411.903,382.861c-19.217-10.412-39.595-18.522-60.712-24.16\n    c10.352-35.996,15.786-73.227,16.152-110.68h95.92C461.521,297.409,443.459,344.828,411.903,382.861z\"\n        />\n      </g>\n    </g>\n  </svg>\n);\n\nexport const NextArrow = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 476.213 476.213\">\n    <polygon\n      points=\"345.606,107.5 324.394,128.713 418.787,223.107 0,223.107 0,253.107 418.787,253.107 324.394,347.5 \n\t345.606,368.713 476.213,238.106 \"\n    />\n  </svg>\n);\n\nexport const Search = ({className}) => (\n  <svg className={className} viewBox=\"0 0 24 24\"><path d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"></path></svg>\n);","import { createContext } from 'react';\n\nexport const ModalContext = createContext({show: false, component: null, className:'', withClose: true})\nexport const SiteDataContext = createContext(\n  {\n    imageData: [], \n    authorData: [],\n    searchData: {}\n  }\n)","import classNames from 'classnames';\nimport React, { useContext } from 'react';\nimport { Cancel } from '../assets/svgIcons';\nimport { ModalContext } from '../utils/context';\n\nconst FramedModal = ({show, className, component, onClose }) => {\n  const visibleClass = show ? 'is-visible' : undefined;\n  const { modal, setModal } = useContext(ModalContext);\n\n  const handleClose = React.useCallback(() => {\n    const isFullscreen = document.fullScreen ||\n    document.mozFullScreen ||\n    document.webkitIsFullScreen ||\n    document.msFullscreenElement;\n\n    if (isFullscreen) {\n      document.exitFullscreen();\n    } else {\n      if (onClose) {\n        onClose();\n      } else {\n        setModal({ className:'', component: null, show: false });\n      }\n    }\n  }, [onClose, setModal]);\n\n  return (\n    <div className={classNames('framed-modal', className, visibleClass)}>\n      <div className=\"framed-modal-overlay\" onClick={handleClose}>\n        <div className=\"framed-modal-content\" onClick={(event) => {event.stopPropagation();}}>\n          {component}\n        </div>\n      </div>\n      {modal.withClose && (\n      <button className=\"close\" onClick={handleClose}>\n        <Cancel />\n      </button>)}\n    </div>\n  );\n};\n\nexport default FramedModal;","const baseSearchData = {\n  minDate:new Date('2019-02-17'),\n  maxDate:new Date(),\n  numberHelpers: [\n    { label: 'greater than', hint: '>=', operator: '>'},\n    { label: 'less than', hint: '<=', operator: '<'},\n  ],\n  searchOptions: [\n    {\n      label: 'author',\n      property: 'author',\n      hint: 'user name',\n      type: 'string',\n      helperText: \":\",\n      entries: [],\n      helpers: true\n    },\n    {\n      label: 'title',\n      property: 'game',\n      hint: 'game title',\n      type: 'string',\n      helperText: \":\",\n      entries: [],\n      helpers:true\n    },\n    {\n      label: 'before',\n      property: 'epochtime',\n      hint: 'specific date',\n      type: 'number',\n      helperText: \":\",\n      operator: '<',\n      helpers:false\n    },\n    {\n      label: 'after',\n      property: 'epochtime',\n      hint: 'specific date',\n      type: 'number',\n      helperText: \":\",\n      operator: '>',\n      helpers:false\n    },\n    {\n      label: 'width',\n      property: 'width',\n      hint: 'pixels wide',\n      helperText: \":\",\n      type: 'number',\n      helpers:true,\n      range: []\n    },\n    {\n      label: 'height',\n      property: 'height',\n      hint: 'pixels tall',\n      helperText: \":\",\n      type: 'number',\n      helpers:true,\n      range: []\n    },\n    {\n      label: 'score',\n      property: 'score',\n      hint: 'number of reactions',\n      helperText: \":\",\n      type: 'number',\n      helpers:true, \n      range: []\n    }\n  ]\n}\n\nexport const scrolledToBottom = (el, buffer) => {\n  return (el.getBoundingClientRect().bottom - buffer) <= window.innerHeight;\n}\n\nexport const breakpoints = {\n  mobile: 820,\n};\n\nexport const getBrowserFullscreenElementProp = () => {\n  if (typeof document.fullscreenElement !== 'undefined') {\n    return 'fullscreenElement';\n  } else if (typeof document.mozFullScreenElement !== 'undefined') {\n    return 'mozFullScreenElement';\n  } else if (typeof document.msFullscreenElement !== 'undefined') {\n    return 'msFullscreenElement';\n  } else if (typeof document.webkitFullscreenElement !== 'undefined') {\n    return 'webkitFullscreenElement';\n  } else {\n    throw new Error('fullscreenElement is not supported by this browser');\n  }\n}\n\nexport const extractTopLevelDomain = (url) => {\n  if (!url.indexOf('//')) {\n    return url;\n  }\n  const start = url.indexOf('//') + 2;\n  const newURL = url.slice(start);\n  if (newURL.indexOf('/') < 0) {\n    return newURL;\n  }\n  const end = newURL.indexOf('/');\n\n  return newURL.slice(0, end);\n}\n\nexport const getQueryParam = (param) => {\n  const search = window.location.search;\n  const params = new URLSearchParams(search);\n\n  return params.get(param);\n}\n\nconst getRange = (key, data) => {\n  const sortMethod = (a, b) => (a[key] > b[key] ? 1 : b[key] > a[key] ? -1 : 0);\n  const sortedData = data.sort(sortMethod);\n  return [sortedData[0][key], sortedData[data.length-1][key]];\n}\n\nexport const generateSearchData = (data) => {\n  const searchData = baseSearchData;\n  const searchWithEntries = searchData.searchOptions.filter((item) => {\n    return item.hasOwnProperty('entries')\n  })\n\n  for (let item of data) {\n    for (let searchOption of searchWithEntries) {\n      const property = searchOption.property;\n      const entries = searchOption.entries;\n      if (!entries.includes(item[property])) {\n        entries.push(item[property])\n      }\n    }\n  }\n\n  // get min-max ranges\n  for (let item of searchData.searchOptions) {\n    if (item.hasOwnProperty('range')) {\n      item.range=getRange(item.property, data);\n    }\n  }\n\n  for (let item of searchWithEntries) {\n    item.entries.sort();\n  }\n  return (searchData);\n}\n\nexport const getSearchKey = (searchOption) => {\n  const index = baseSearchData.searchOptions.findIndex(e => e.label === searchOption);\n  const found = index > -1;\n  return found ? baseSearchData.searchOptions[index].property : false;\n}\n\nexport const getOperator = (searchOption) => {\n  const index = baseSearchData.searchOptions.findIndex(e => e.label === searchOption);\n  const searchItem = baseSearchData.searchOptions[index];\n  return searchItem?.operator;\n}\n\nexport const getSearchDataByType = (type) => {\n  const itemsByType = baseSearchData.searchOptions.filter((item) => item.type === type);\n  return itemsByType.map(item => item.property);\n}","import { useEffect, useLayoutEffect, useState } from 'react';\nimport { getBrowserFullscreenElementProp, scrolledToBottom } from './utils';\n\nexport const useViewport = () => {\n  const actualWidth = document.documentElement.clientWidth || document.body.clientWidth;\n  const [width, setWidth] = useState(actualWidth);\n\n  const onWindowLoad = () => {\n    const actualWidth = document.documentElement.clientWidth || document.body.clientWidth;\n    setWidth(actualWidth);\n  }\n\n  useEffect(() => {\n    let resizeTimeout;\n    window.setTimeout(onWindowLoad, 1000);\n    const handleWindowResize = () => {\n      const windowWidth = document.documentElement.clientWidth || document.body.clientWidth;\n      clearTimeout(resizeTimeout);\n      resizeTimeout = setTimeout(() => setWidth(windowWidth), 50);\n    };\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n\n  // Return the width so we can use it in our components\n  return { width };\n};\n\nexport const useScrollPosition = (moreImageToLoad) => {\n  const [isBottom, setIsBottom] = useState(false);\n\n  useEffect(() => {\n    const onScroll = () => {\n      const wrappedElement = document.body;\n      if (moreImageToLoad) {\n        setIsBottom(scrolledToBottom(wrappedElement, 100));\n      }\n    };\n    window.addEventListener('scroll', onScroll, false);\n    return () => window.removeEventListener('scroll', onScroll, false);\n  }, [moreImageToLoad]);\n\n  // Return the width so we can use it in our components\n  return moreImageToLoad ? isBottom : false;\n};\n\nexport const useOutsideAlerter = (ref, onClickOutside) => {\n  useEffect(() => {\n    /**\n     * Alert if clicked on outside of element\n     */\n    function handleClickOutside(event) {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClickOutside();\n      }\n    }\n\n    // Bind the event listener\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      // Unbind the event listener on clean up\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [ref, onClickOutside]);\n};\n\nexport const useFullscreenStatus = (elRef) => {\n  const [isFullscreen, setIsFullscreen] = useState(\n    document[getBrowserFullscreenElementProp()] != null,\n  );\n\n  const setFullscreen = () => {\n    if (elRef.current == null) return;\n\n    elRef.current\n      .requestFullscreen()\n      .then(() => {\n        setIsFullscreen(document[getBrowserFullscreenElementProp()] != null);\n      })\n      .catch(() => {\n        setIsFullscreen(false);\n      });\n  };\n\n  useLayoutEffect(() => {\n    document.onfullscreenchange = () =>\n      setIsFullscreen(document[getBrowserFullscreenElementProp()] != null);\n\n    return () => (document.onfullscreenchange = undefined);\n  });\n\n  return [isFullscreen, setFullscreen];\n};","import React from 'react';\nimport { useViewport } from '../utils/hooks';\n\nconst ImageGrid = ({\n  className,\n  images,\n  rowTargetHeight = 400,\n  borderOffset = 5,\n  onClick,\n}) => {\n  const { width } = useViewport();\n  const maxWidth = width - borderOffset * 2;\n\n  const processImages = () => {\n    const processedImages = [];\n\n    for (let i = 0; i < images.length; i++) {\n      let width = parseInt(images[i].width);\n      const height = parseInt(images[i].height);\n      width = width * (rowTargetHeight / height);\n\n      const image = {\n        id: images[i].id,\n        author: images[i].author,\n        authorid: images[i].authorid,\n        authorsAvatarUrl: images[i].authorsAvatarUrl,\n        epochtime: images[i].epochtime,\n        game: images[i].game,\n        score: images[i].score,\n        shotUrl: images[i].shotUrl,\n        spoiler: images[i].spoiler,\n        thumbnailUrl: images[i].thumbnailUrl,\n        width: width,\n        height: rowTargetHeight,\n      };\n\n      processedImages.push(image);\n    }\n\n    return processedImages;\n  };\n\n  const makeSmaller = (image, amount) => {\n    amount = amount || 1;\n\n    const newHeight = image.height - amount;\n    image.width = image.width * (newHeight / image.height);\n    image.height = newHeight;\n\n    return image;\n  };\n\n  const getCumulativeWidth = (images) => {\n    let width = 0;\n\n    for (let i = 0; i < images.length; i++) {\n      width += images[i].width;\n    }\n\n    width += (images.length - 1) * borderOffset;\n\n    return width;\n  };\n\n  const buildRows = () => {\n    let currentRow = 0;\n    let currentWidth = 0;\n    let imageCounter = 0;\n    const rows = [];\n    const processedImages = processImages();\n\n    while (processedImages[imageCounter]) {\n      if (currentWidth >= maxWidth) {\n        currentRow++;\n        currentWidth = 0;\n      }\n      if (!rows[currentRow]) {\n        rows[currentRow] = [];\n      }\n\n      rows[currentRow].push(processedImages[imageCounter]);\n      currentWidth += processedImages[imageCounter].width;\n\n      imageCounter++;\n    }\n\n    return rows;\n  };\n\n  const normalizeImage = (image) => {\n    image.width = parseInt(image.width);\n    image.height = parseInt(image.height);\n\n    return image;\n  };\n\n  const normalizeImages = (images) => {\n    for (let i = 0; i < images.length; i++) {\n      normalizeImage(images[i]);\n    }\n\n    return images;\n  };\n\n  const fitImagesInRow = (images) => {\n    while (getCumulativeWidth(images) > maxWidth) {\n      for (let i = 0; i < images.length; i++) {\n        images[i] = makeSmaller(images[i]);\n      }\n    }\n\n    return images;\n  };\n\n  const renderGrid = (rows) => {\n    return (\n      <div\n        className={className}\n        style={{\n          paddingLeft: borderOffset,\n          paddingTop: 50 + borderOffset,\n        }}\n      >\n        {rows.map((row, index) => {\n          return (\n            <div key={index} className=\"image-row\">\n              {row.map((image, imageIndex) => {\n                return (\n                  <div\n                    className=\"thumbnail-container\"\n                    style={{\n                      marginRight: borderOffset,\n                      marginBottom: borderOffset,\n                    }}\n                    key={`thumbnail-container-${image.id}`}\n                  >\n                    <img\n                      alt={image.gameName}\n                      key={imageIndex}\n                      src={image.thumbnailUrl}\n                      style={{\n                        width: Math.ceil(image.width),\n                        height: image.height,\n                        cursor: 'pointer',\n                      }}\n                      onClick={() => onClick(image)}\n                    />\n                    {image.spoiler && (\n                      <div\n                        className=\"spoiler\"\n                        onClick={(event) => {\n                          event.target.style.display = 'none';\n                        }}\n                      >\n                        <span>SPOILER</span>\n                      </div>\n                    )}\n                    <div className=\"image-info\">\n                      <span className=\"by\">by</span>{' '}\n                      <span className=\"author\">{image.author}</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const buildGrid = () => {\n    const rows = buildRows();\n\n    for (let i = 0; i < rows.length; i++) {\n      rows[i] = fitImagesInRow(rows[i]);\n\n      rows[i] = normalizeImages(rows[i]);\n\n      const difference = maxWidth - getCumulativeWidth(rows[i]);\n      const amountOfImages = rows[i].length;\n\n      if (amountOfImages > 1 && difference < 10) {\n        const addToEach = difference / amountOfImages;\n        for (let n = 0; n < rows[i].length; n++) {\n          rows[i][n].width += addToEach;\n        }\n\n        rows[i] = normalizeImages(rows[i]);\n\n        rows[i][rows[i].length - 1].width += maxWidth - getCumulativeWidth(rows[i]);\n      }\n    }\n\n    return renderGrid(rows);\n  };\n\n  return buildGrid();\n};\n\nexport default ImageGrid;\n","const AboutModalContent = () => {\n  return (\n    <div className=\"about-modal-content\">\n      {/* <img alt=\"Welcome to Framed\" src={framedBanner}></img> */}\n      <h2>About the Hall of Framed</h2>\n      <div className='about-modal-columns'>\n        <section>\n          <p>\n            The <a href=\"https://framedsc.github.io/\">Framed Screenshot Community</a> Discord server\n            started in 2019 as a place to discuss and collaborate in the space of video game\n            screenshots. It has since become so full of incredible shots that we’ve run out of room\n            to highlight them all. To fix that we created a Discord bot that curates the most\n            popular shots within the server, displaying them within a dedicated channel that filters\n            to this site. Posted shots can be voted on in the Discord server. Our clever bot will\n            publish entries into the Hall of Framed based on popularity, which has allowed us to put\n            the power to curate the best shots into the hands of our community, helping to showcase\n            the depth and variety of creativity within this space.\n          </p>\n          <p>\n            We hope that this can serve as a showcase for what talented screenshotters can achieve.\n            Maybe you'll find it useful as inspiration, or as a nice source of background images for\n            your PC or phone.\n          </p>\n        </section>\n        <section>\n          <h4>Gallery Controls</h4>\n          <p>\n            This gallery can be navigated with both mouse and keyboard shortcuts. You can use the\n            left & right arrow keys to cycle between shots, while the F key will open the currently\n            selected image in fullscreen and the ESC key can be used to close the viewer. If you’re\n            browsing on a mobile or touch device, you can also use swipe motions to navigate the\n            images.\n          </p>\n        </section>\n        <section>\n          <h4>Copyright and usage</h4>\n          <p>\n            All shots on this site are &copy; the rightful owner of the work. Shots on this site are\n            strictly for personal use only. It's not allowed to use the shots in commercial or other\n            non-personal contexts without the written approval of the copyright owner.\n          </p>\n        </section>\n        <section>\n          <h4>Search options</h4>\n          <div>\n            <p>\n              You can simply type in the box to search, or you can specify the term you wish to\n              search for. Each search you enter will be added as a separate filter, allowing you \n              to narrow the results further. As you type, a window will show you the possible \n              types of data you can search for and will guide you along if you click them. \n              Filters can be removed by clicking them in the window. Examples:\n            </p>\n            <ol>\n              <li><code>cyberpunk</code><span> : searches all data for the text \"cyberpunk\"</span></li>\n              <li><code>title: Cyberpunk</code><span> : finds shots from the game \"Cyberpunk\"</span></li>\n              <li><code>author: Dread</code><span> : finds all shots by \"Dread\"</span></li>\n              <li><code>before: 2021-03-18</code><span> : finds shots posted before March 18th, 2021</span></li>\n              <li><code>after: 2020-11-05</code><span> : finds shots posted after November 5th, 2020</span></li>\n              <li><code>width:{` > `}3840</code><span> : finds shots with a width greater than or equal 3840</span></li>\n              <li><code>height:{` < `}2160</code><span> : finds shots with a height smaller than or equal to 2160</span></li>\n            </ol>\n            <br />\n          </div>\n        </section>\n        <section>\n          <h4>Contact</h4>\n          <p>\n            For general inquiries, or if you want to get an invite to the Discord server you can\n            contact either Jim2Point0 or Otis_Inf via the below links\n          </p>\n\n          <p>\n            Tweet @Jim2Point0 on <a href=\"https://twitter.com/jim2point0\">Twitter</a>\n          </p>\n\n          <p>\n            Tweet @FransBouma on <a href=\"https://twitter.com/FransBouma\">Twitter</a>\n            <br />\n            Or contact him through his <a href=\"https://fransbouma.com/contact\">Website</a>\n          </p>\n        </section>\n      </div>\n    </div>\n  );\n};\n\nexport default AboutModalContent;\n","import classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Cancel } from '../assets/svgIcons';\n\nclass SearchFilter extends PureComponent {\n  static propTypes = {\n    className: PropTypes.string,\n    text: PropTypes.string,\n    onClick: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      startAnimate: false\n    };\n  }\n\n  componentDidMount() {\n    this.timeoutId = setTimeout(function () {\n      this.setState({startAnimate: true});\n    }.bind(this), 1);\n  }\n\n  render() {\n    const { className, onClick, text } = this.props;\n    const {startAnimate} = this.state;\n    const normalClass = startAnimate ? 'normal' : false;\n\n    return (\n      <button \n        key={`filter-${text}`} \n        className={classNames(className, normalClass)} \n        onClick={onClick}\n      >\n        <span class=\"filter-text\">{text}</span> \n        <span class=\"cancel-button\"><Cancel /></span>\n      </button>\n    )\n  }\n}\n\nexport default SearchFilter;\n","import classNames from 'classnames';\nimport React, { useCallback, useRef } from 'react';\nimport DatePicker from 'react-date-picker';\nimport { Cancel } from '../assets/svgIcons';\nimport { useOutsideAlerter } from '../utils/hooks';\nimport { getSearchKey } from '../utils/utils';\nimport SearchFilter from './SearchFilter';\n\nconst AdvancedSearch = ({ \n    handleSearchFocus, \n    handleSearchBlur, \n    updateFilters,\n    updateSearch, \n    focused,\n    searchText, \n    filters, \n    searchData, \n    isMobile \n  }) => {\n  const delimiter = ',';\n\n  const convertTextToFilters = useCallback((text, currentFilters) => {\n    const index = text.indexOf(delimiter);\n    const newFilters = currentFilters.slice();\n    if (index > -1) {\n      const filter = text.substring(0, index);\n      const remaining = text.substring(index+1, text.length);\n      newFilters.push(filter);\n      return convertTextToFilters(remaining, newFilters);\n    }\n    return {text, newFilters}\n  }, [])\n\n  const processSearchInput = useCallback((inputValue) => {\n    const { text, newFilters } = convertTextToFilters(inputValue, []);\n    updateSearch(text.trimStart());\n    if (newFilters.length) {\n      updateFilters(filters.concat(newFilters));\n    }\n  }, [filters, convertTextToFilters, updateFilters, updateSearch]);\n\n  const handleSearchChange = (event) => {\n    const inputValue = event.target.value;\n    if (isMobile) {\n      const newFilters = inputValue.split(delimiter).map(e => e.trimStart());\n      updateSearch(inputValue);\n      updateFilters(newFilters);\n    } else {\n      processSearchInput(inputValue);\n    }\n  };\n\n  const clearSearch = () => {\n    updateSearch('');\n  };\n\n  const handleKeyboard = React.useCallback(\n    (event) => {\n      const { key } = event;\n\n      if (!focused) {\n        return false;\n      }\n\n      switch (key) {\n        case 'Enter':\n          return processSearchInput(`${searchText}${delimiter}`);\n        default:\n          return false;\n      }\n    },\n    [focused, processSearchInput, searchText],\n  );\n\n  const handleClickOutside = () => {\n    if (isMobile) {\n      return;\n    }\n    handleSearchBlur();\n  };\n\n  const handleFocus = () => {\n    if (isMobile) {\n      return;\n    }\n    const text = searchText;\n    updateSearch('');\n    updateSearch(text);\n    handleSearchFocus();\n  }\n\n  const getSearchOptionText = () => {\n    const delimiterIndex = searchText.indexOf(':');\n    return searchText.substr(0, delimiterIndex);\n  }\n\n  const removeFilter = (filterToRemove) => {\n    const index = filters.findIndex((e) => e === filterToRemove);\n    const newFilters=filters.slice();\n    newFilters.splice(index, 1);\n    updateFilters(newFilters);\n  }\n\n  const addDate = (value) => {\n    const isoValue = value.toISOString();\n    const dateValue = isoValue.substr(0,isoValue.indexOf('T'));\n    const searchOptionText = getSearchOptionText();\n\n    searchInputRef?.current?.focus();\n    processSearchInput(`${searchOptionText}: ${dateValue}${delimiter}`);\n  }\n\n  const addHelper = (helperText) => {\n    const searchOptionText = getSearchOptionText();\n\n    searchInputRef?.current?.focus();\n    processSearchInput(`${searchOptionText}: ${helperText}${delimiter}`);\n  }\n\n  const addSearchOption = (item) => {\n    searchInputRef?.current?.focus();\n    updateSearch(`${item.label}${item.helperText}`);\n  }\n\n  const addOperator = (item) => {\n    const searchOptionText = getSearchOptionText();\n    searchInputRef?.current?.focus();\n    updateSearch(`${searchOptionText}: ${item.operator}`);\n  }\n\n  const renderSearchOptions = () => {\n    const { searchOptions } = searchData;\n    const validSearchOptions = searchOptions.filter(item => {\n      return !searchText.length || item.label.includes(searchText)\n    })\n    \n    return (\n      <>\n        <div className=\"search-header\">Search Options:</div>\n        {validSearchOptions.map((item) => {\n          return (\n            <div \n              className=\"search-option\" \n              key={`searchoption-${item.label}`}\n              onClick={() => addSearchOption(item)} \n            >\n              <span>{item.label}:</span>\n              <span className=\"search-hint\">{` ${item.hint}`}</span>\n            </div>\n          )\n        })}\n      </>\n    )\n  }\n\n  const renderDatePicker = (searchOption) => {\n    return (\n      <>\n        <span className=\"search-header\">Search {searchOption}: {` `}</span>\n        <DatePicker\n          onChange={addDate}\n          isOpen={true}\n          closeCalendar={false}\n          maxDate={searchData.maxDate}\n          minDate={searchData.minDate}\n        />\n      </>\n    )\n  }\n\n  const renderEntries = (entries) => {\n    const delimiterIndex = searchText.indexOf(':');\n    const searchTermText = searchText.substr(0, delimiterIndex);\n    const searchOptionText = searchText.substr(delimiterIndex + 1, searchText.length).toLowerCase().trimStart();\n    if (!searchOptionText.length > 0) {\n      return <div>Type to narrow list...</div>\n    }\n    const validEntries = entries.filter(item => item.toLowerCase().includes(searchOptionText));\n    const limitEntries = validEntries.slice(0, 10);\n    return (\n      <>\n        <div className=\"search-header\">{searchTermText} possibilities:</div>\n        {limitEntries.map((item, index) => {\n          return (\n            <div \n              key={`search-helper${index}`} \n              className={classNames('search-option')}\n              onClick={()=>addHelper(item)}\n            >\n              <span className='result'>{item}</span>\n            </div>\n          )\n        })}\n      </>\n    )\n  }\n\n  const renderSearchHelpers = () => {\n    const delimiterIndex = searchText.indexOf(':');\n    const searchOption = searchText.substr(0, delimiterIndex);\n    const searchKey = getSearchKey(searchOption);\n\n    if (!searchKey) {\n      return <div className=\"search-header\">Text search</div>\n    }\n\n    if (searchKey === 'epochtime') {\n      return renderDatePicker(searchOption);\n    }\n    \n    const searchOptions = searchData.searchOptions;\n    const searchOptionIndex = searchOptions.findIndex(e => e.label === searchOption);\n    const searchOptionData = searchOptions[searchOptionIndex];\n    const showOperators = searchText.indexOf('>') === -1 && searchText.indexOf('<') === -1;\n    if (searchOptionData.helpers && searchOptionData.entries?.length) {\n      return renderEntries(searchOptionData.entries)\n    } else if (searchOptionData.type === 'number' && showOperators) {\n      return searchData.numberHelpers.map((item) => {\n        return (\n          <div \n            className=\"search-option\" \n            key={`operator-${item.label}`}\n            onClick={() => addOperator(item)}\n          >\n            <span>{item.label}:</span>\n            <span className=\"search-hint operator\">{item.hint}</span>\n          </div>\n        )\n      })\n    } else if (searchOptionData.type === 'number' && !showOperators) {\n      const min = searchOptionData.range[0]\n      const max = searchOptionData.range[1];\n      return (\n        <div className='range-info'>\n          <p>Enter number to filter by <span>{searchOptionData.label}.</span></p>\n          <span>{searchOptionData.label}</span> ranges from <span>{`${min}`}</span> to <span>{`${max}`}</span>\n        </div>\n      )\n    }\n    return null;\n  }\n\n  const renderCurrentFilters = () => {\n    return (\n      <div className=\"current-filters\">\n        <span className=\"search-header\">Current filters:</span>\n        {filters.map((item, index) => {\n          if (!item.length || item === ' ') {\n            return null;\n          }\n          return (\n            <SearchFilter \n              key={`filter-${index}`} \n              className='search-filter' \n              text={item}\n              onClick={()=>removeFilter(item)}\n            />\n          );\n        })}\n      </div>\n    ) \n  }\n\n  const activeClass = searchText.length > 0 ? 'active' : undefined;\n  const focusedClass = focused ? 'focused' : false;\n  const advancedSearchRef = useRef(null);\n  const searchInputRef = useRef(null);\n  const filterText = filters.length > 1 ? 'filters' : 'filter';\n  const filterPlaceholder = filters.length > 0 ? ` (${filters.length} ${filterText} active)` : '';\n  useOutsideAlerter(advancedSearchRef, handleClickOutside);\n\n  React.useEffect(() => {\n    window.addEventListener('keyup', handleKeyboard);\n\n    if (isMobile && filters.length > 0 && !searchText) {\n      updateSearch(filters);\n    }\n\n    return () => {\n      window.removeEventListener('keyup', handleKeyboard);\n    };\n  }, [handleKeyboard, filters, updateSearch, isMobile, searchText]);\n\n  return (\n    <div className={classNames('search', activeClass, focusedClass)} ref={advancedSearchRef}>\n      <input\n        type=\"search\"\n        name=\"search\"\n        className=\"search-input\"\n        value={searchText}\n        onChange={handleSearchChange}\n        placeholder={`Search${filterPlaceholder}`}\n        autoComplete='off'\n        onFocus={handleFocus}\n        ref={searchInputRef}\n      />\n      {/* <Search className=\"search\" /> */}\n      {focused && (<button className=\"cancel\" onClick={clearSearch}>\n        <Cancel />\n      </button>)}\n      {!isMobile && (\n        <div className=\"search-filters\">\n          {focused && (\n            <div className='filter-options'>\n            {!searchText.includes(':') && renderSearchOptions()}\n            {searchText.includes(':') && renderSearchHelpers()}\n          </div>\n          )}\n          {renderCurrentFilters()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(AdvancedSearch);\n","import classNames from 'classnames';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\nimport { useHistory } from \"react-router-dom\";\nimport { About, FramedIcon, Menu, SortDown, SortUp } from '../assets/svgIcons';\nimport AboutModalContent from '../components/AboutModalContent';\nimport { ModalContext } from '../utils/context';\nimport { useOutsideAlerter, useViewport } from '../utils/hooks';\nimport { breakpoints } from '../utils/utils';\nimport AdvancedSearch from './AdvancedSearch';\n\nconst ImageNav = ({ className, options, reverseSort, updateSort, updateFormat, onLogoClick, searchProps }) => {\n  const [active, setActive] = useState(options[0]);\n  const [type, setType] = useState('All');\n  const [searchFocused, setSearchFocused] = useState(false);\n  const { setModal } = useContext(ModalContext);\n  const history = useHistory();\n\n  const handleOptionChange = (selection) => {\n    setActive(selection);\n    updateSort(selection);\n  };\n\n  const handleFormatChange = (value) => {\n    setType(value);\n    updateFormat(value);\n  };\n\n  const handleLogoClick = () => {\n    setType('All');\n    setActive(options[0]);\n    onLogoClick();\n  }\n\n  const showAbout = () => {\n    const modalComponent = <AboutModalContent />;\n\n    setModal({ show: true, component: modalComponent, className: 'about-window', withClose: true });\n  };\n\n  const handleSearchFocus = () => {\n    setSearchFocused(true);\n  }\n\n  const handleSearchBlur = () => {\n    setSearchFocused(false);\n  }\n\n  const formats = ['All', 'Wide', 'Portrait'];\n  const icon = reverseSort ? <SortUp key='sortup'/> : <SortDown key='sortdown'/>;\n\n  const renderSearch = ()=> {\n    return (\n      <AdvancedSearch\n        handleSearchFocus={handleSearchFocus}\n        handleSearchBlur={handleSearchBlur}\n        focused={searchFocused}\n        isMobile={isMobile}\n        {...searchProps}\n      />\n    )\n  }\n\n  const renderSort = (\n    <ul className=\"filters\">\n      {options.map((item, index) => {\n        const isActive = active.key === item.key;\n        const buttonClass = isActive ? 'is-active' : undefined;\n\n        return (\n          <li key={index}>\n            <button\n              id={item.label}\n              className={classNames('filter', buttonClass)}\n              onClick={() => handleOptionChange(item)}\n              key={item.label}\n            >\n              {item.label}\n              {isActive && icon}\n            </button>\n          </li>\n        );\n      })}\n    </ul>\n  );\n\n  const renderFilters = () => {\n    const hiddenClass = searchFocused && !isMobile ? 'hidden' : false;\n    \n    return (\n      <div className={classNames('image-types', hiddenClass)}>\n        {formats.map((item) => {\n          return (\n            <>\n              <input\n                id={`${item}-label`}\n                onChange={() => handleFormatChange(item)}\n                checked={type === item}\n                type=\"radio\"\n                value={item}\n                name=\"type\"\n                key={`${item}-input`}\n              />\n              <label key={`${item}-label`} htmlFor={`${item}-label`}>\n                {item}\n              </label>\n            </>\n          );\n        })}\n      </div>\n    )\n  }\n\n  const aboutIconButton = (\n    <button className=\"about-icon\" onClick={showAbout}>\n      <About />\n    </button>\n  );\n\n  const renderDesktop = () => {\n    return (\n      <>\n        {renderSort}\n        {renderFilters()}\n        {renderSearch()}\n        {aboutIconButton}\n      </>\n    );\n  };\n\n  const renderMobile = () => {\n    const mobileMenuClass = showMenu ? 'show' : false;\n    return (\n      <div className={classNames('mobile-menu', mobileMenuClass)} ref={mobileMenuRef}>\n        <button className=\"menu-button\" onClick={() => setShowMenu((current) => !current)}>\n          <Menu />\n        </button>\n        {showMenu && (\n          <div className=\"mobile-menu-content-mask\">\n            <div className=\"mobile-menu-content\">\n              {renderSearch()}\n              {renderSort}\n              {renderFilters()}\n            </div>\n          </div>\n        )}\n        {aboutIconButton}\n      </div>\n    );\n  };\n\n  const handleClickOutside = () => {\n    setShowMenu(false);\n  };\n\n  const [showMenu, setShowMenu] = useState(false);\n  const { width } = useViewport();\n  const isMobile = width <= breakpoints.mobile;\n  const viewportClass = isMobile ? 'image-nav--mobile' : 'image-nav--desktop';\n\n  const mobileMenuRef = useRef(null);\n  useOutsideAlerter(mobileMenuRef, handleClickOutside);\n\n  useEffect(() => {\n    if (!isMobile) {\n      setShowMenu(false);\n    }\n  }, [isMobile, history]);\n\n  return (\n    <div className={`image-nav ${viewportClass} ${className}`}>\n      <div className=\"framed-icon\">\n        <button onClick={handleLogoClick} type=\"button\"><FramedIcon /></button>\n      </div>\n      {!isMobile && renderDesktop()}\n      {isMobile && renderMobile()}\n    </div>\n  );\n};\n\nexport default React.memo(ImageNav);\n","import { Flickr, Globe, Instagram, Steam, Twitter } from '../assets/svgIcons';\nimport { extractTopLevelDomain } from '../utils/utils';\n\nexport const SocialLinks = ({ data = null }) => {\n  if (!data) {\n    return null;\n  }\n\n  const renderSocials = (linkList) => {\n    return (\n      <>\n        {linkList.map((social, index) => {\n          const socialText = social.label ? social.label : extractTopLevelDomain(social.link);\n          return (\n            <li className=\"author-link\" key={`social-button-${index}`}>\n              <a\n                className=\"social-link\"\n                key={`social-link-${index}`}\n                rel=\"noreferrer\"\n                target=\"_blank\"\n                href={social.link}\n                title={social.link}\n                onClick={(event) => event.stopPropagation()}\n              >\n                <span>{socialText}</span>\n              </a>\n            </li>\n          );\n        })}\n      </>\n    );\n  };\n\n  const socials = [\n    { key: 'twitter', icon: <Twitter />, label: 'Twitter' },\n    { key: 'steam', icon: <Steam />, label: 'Steam' },\n    { key: 'flickr', icon: <Flickr />, label: 'Flickr' },\n    { key: 'instagram', icon: <Instagram />, label: 'Instagram' },\n  ];\n  let authorSocials = [];\n  let otherSocials = [];\n  for (const social of socials) {\n    if (data[social.key].length) {\n      authorSocials.push({\n        label: social.label,\n        key: social.key,\n        icon: social.icon,\n        link: data[social.key],\n      });\n    }\n  }\n\n  for (let i = 0; i < data.othersocials.length; i++) {\n    otherSocials.push({ key: 'other', icon: <Globe />, link: data.othersocials[i] });\n  }\n\n  return !authorSocials.length && !otherSocials.length ? (\n    <p className=\"author-links-list\">This author has not listed their socials on Framed</p>\n  ) : (\n    <ul className=\"author-links-list\">\n      {authorSocials.length > 0 && renderSocials(authorSocials)}\n      {otherSocials.length > 0 && renderSocials(otherSocials)}\n    </ul>\n  );\n};\n\nexport default SocialLinks;\n","import classNames from 'classnames';\nimport React from 'react';\n\nconst Spinner = ({show = false, className, modifier='' }) => {\n  const baseClass = 'framed-spinner';\n\n  const svgSpinner = (\n    <div className={`${baseClass}-svg-wrapper`}>\n      <svg className={`${baseClass}-svg-back`} viewBox=\"0 0 200 200\">\n        <circle cx=\"100\" cy=\"100\" r=\"90\" fill=\"none\" />\n      </svg>\n      <svg className={`${baseClass}-svg-segment`} viewBox=\"0 0 200 200\">\n        <circle cx=\"100\" cy=\"100\" r=\"90\" fill=\"none\" />\n      </svg>\n    </div>\n  );\n\n  const spinner = (\n    <div\n      className={classNames(baseClass, `${baseClass}--${modifier}`, className)}\n    >\n      {svgSpinner}\n    </div>\n    );\n\n    const spinnerContainer = () => {\n      const modifierClass = modifier ? 'global' : false;\n  \n      return <div className={`${baseClass}-container ${modifierClass}`}>{spinner}</div>;\n    }\n\n  return show ? spinnerContainer() : null;\n};\n\nexport default Spinner;","import classNames from 'classnames';\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport { useSwipeable } from 'react-swipeable';\nimport { Cancel, ExitFullscreen, Fullscreen, NextArrow } from '../assets/svgIcons';\nimport SocialLinks from '../components/SocialLinks';\nimport { ModalContext, SiteDataContext } from '../utils/context';\nimport { useFullscreenStatus } from '../utils/hooks';\nimport Spinner from './Spinner';\n\nconst initialState = {\n  initialized: false, \n  loadedState: false, \n  showImage: false, \n  authorExpanded: false\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'initialize':\n      return { ...state, initialized: true };\n    case 'close':\n      return { ...initialState };\n    case 'loadImage':\n      return { initialized: true, loadedState: true, showImage: true };\n    case 'changeImage':\n      return { ...state, loadedState: false };\n    case 'showGlobalSpinner':\n      return { ...state, initialized: false, showImage: false };\n    case 'expandSocials':\n      return { ...state, authorExpanded: true };\n    case 'closeSocials':\n      return { ...state, authorExpanded: false };\n    default:\n      return state;\n  }\n};\n\nconst ImageViewer = ({ image = {}, show, onClose, data, onPrev, onNext, setBgImage }) => {\n  const [{ authorExpanded, initialized, loadedState, showImage }, dispatch] = useReducer(reducer, {\n    authorExpanded: false,\n    initialized: false,\n    loadedState: false,\n    showImage: false,\n  });\n\n  const { modal } = useContext(ModalContext);\n  const siteData = useContext(SiteDataContext);\n  const { authorData } = siteData;\n\n  let isFullscreen, setIsFullscreen;\n  const imageViewerContent = React.useRef(null);\n  let fullScreenError;\n  try {\n    [isFullscreen, setIsFullscreen] = useFullscreenStatus(imageViewerContent);\n  } catch (e) {\n    fullScreenError = 'Fullscreen not supported';\n    isFullscreen = false;\n    setIsFullscreen = undefined;\n  }\n\n  const visibleClass = show ? 'is-visible' : undefined;\n  const prevDisabled = data.findIndex((e) => e.id === image?.id) === 0 || !loadedState;\n  const nextDisabled = data.findIndex((e) => e.id === image?.id) === data.length - 1 || !loadedState;\n\n  const modifier = !initialized ? 'global' : '';\n  const fullscreenClass = isFullscreen ? 'fullscreen' : undefined;\n  const blurClass = modal.show ? 'blur' : undefined;\n  const loadedClass = showImage ? 'loaded' : 'hidden';\n  const viewerClass = modal.show ? 'hidden' : 'visible';\n  const socialData = image && authorData.find((item) => image.author === item.authorNick);\n\n  const handleExitFullscreen = () => document.exitFullscreen();\n\n  const handlePrev = React.useCallback(\n    (event) => {\n      event?.stopPropagation();\n      dispatch({ type: 'changeImage' });\n      onPrev();\n    },\n    [onPrev],\n  );\n\n  const handleNext = React.useCallback(\n    (event) => {\n      event?.stopPropagation();\n      dispatch({ type: 'changeImage' });\n      onNext();\n    },\n    [onNext],\n  );\n\n  const handleClose = React.useCallback(() => {\n    if (isFullscreen) {\n      document.exitFullscreen();\n    } else {\n      dispatch({ type: 'close' });\n      onClose();\n    }\n  }, [isFullscreen, onClose]);\n\n  const handleLoad = () => {\n    dispatch({ type: 'loadImage' });\n    setBgImage(image);\n  };\n\n  const handleKeyboard = React.useCallback(\n    (event) => {\n      const { key } = event;\n\n      if (!show) {\n        return false;\n      }\n\n      switch (key) {\n        case 'ArrowRight':\n          if (nextDisabled) {\n            return false;\n          }\n          return handleNext(event);\n        case 'ArrowLeft':\n          if (prevDisabled) {\n            return false;\n          }\n          return handlePrev(event);\n        case 'Escape':\n          if (isFullscreen || modal.show) {\n            return false;\n          }\n          return handleClose();\n        case 'f':\n          if (fullScreenError) {\n            return false;\n          }\n          return setIsFullscreen();\n        default:\n          return false;\n      }\n    },\n    [\n      modal,\n      isFullscreen,\n      handleClose,\n      handleNext,\n      handlePrev,\n      nextDisabled,\n      prevDisabled,\n      setIsFullscreen,\n      fullScreenError,\n      show,\n    ],\n  );\n\n  useEffect(() => {\n    window.addEventListener('keyup', handleKeyboard);\n\n    // remove listener when component unmounts\n    return () => {\n      window.removeEventListener('keyup', handleKeyboard);\n    };\n  }, [initialized, handleKeyboard]);\n\n  const swipeConfig = {\n    delta: 10,\n    preventDefaultTouchmoveEvent: true,\n    trackTouch: true,\n    trackMouse: false,\n    rotationAngle: 0,\n  };\n\n  const handlers = useSwipeable({\n    onSwipedLeft: () => {\n      if (nextDisabled) {\n        return false;\n      }\n      dispatch({ type: 'showGlobalSpinner' });\n      return handleNext();\n    },\n    onSwipedRight: () => {\n      if (prevDisabled) {\n        return false;\n      }\n      dispatch({ type: 'showGlobalSpinner' });\n      return handlePrev();\n    },\n    onSwiping: (event) => {\n      if ((event.dir === 'Right' && !prevDisabled) || (event.dir === 'Left' && !nextDisabled)) {\n        imageViewerContent.current.style.left = `${event.deltaX}px`;\n      } else {\n        imageViewerContent.current.style.left = '0px';\n      }\n    },\n    onSwiped: () => {\n      imageViewerContent.current.style.left = '0px';\n    },\n    ...swipeConfig,\n  });\n\n  return (\n    <div className={classNames('image-viewer', 'framed-modal', visibleClass)} onClick={handleClose}>\n      <div className={classNames('viewer-nav', viewerClass)}>\n        <button className=\"viewer-nav-button left\" disabled={prevDisabled} onClick={handlePrev}>\n          <NextArrow />\n        </button>\n        <button className=\"viewer-nav-button right\" disabled={nextDisabled} onClick={handleNext}>\n          <NextArrow />\n        </button>\n      </div>\n      <div\n        ref={imageViewerContent}\n        className={classNames('image-viewer-content', fullscreenClass, blurClass)}\n      >\n        {image && (\n          <>\n            <img\n              alt={image.game}\n              src={image.shotUrl}\n              onClick={(event) => {\n                event.stopPropagation();\n              }}\n              onLoad={handleLoad}\n              className={loadedClass}\n              {...handlers}\n            />\n            {initialized && !isFullscreen && (\n              <div\n                className={authorExpanded ? 'shot-info expanded' : 'shot-info'}\n                onClick={(event) => {\n                  event.stopPropagation();\n                }}\n              >\n                <div\n                  className='info clickable'\n                  onClick={\n                    !authorExpanded\n                      ? () => dispatch({ type: 'expandSocials' })\n                      : () => dispatch({ type: 'closeSocials' })\n                  }\n                >\n                  <span className=\"by\">{`by `}</span>\n                  <span className=\"author\">{image.author}</span>\n                  <span className=\"title\">{image.game}</span>\n                  <SocialLinks data={socialData} />\n                </div>\n                <div className=\"image-viewer-controls\">\n                  {!isFullscreen && !fullScreenError && (\n                    <button className=\"fullscreen-button\" onClick={setIsFullscreen}>\n                      <Fullscreen />\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n            {isFullscreen ? (\n              <button className=\"close\" onClick={handleExitFullscreen}>\n                <ExitFullscreen />\n              </button>\n            ) : (\n              <button className=\"close\" onClick={handleClose}>\n                <Cancel />\n              </button>\n            )}\n          </>\n        )}\n        <Spinner modifier={modifier} show={!loadedState} />\n      </div>\n    </div>\n  );\n};\n\nexport default ImageViewer;\n","const IMAGESAPI = 'https://raw.githubusercontent.com/originalnicodrgitbot/hall-of-framed-db/main/shotsdb.json';\nconst AUTHORSAPI = 'https://raw.githubusercontent.com/originalnicodrgitbot/hall-of-framed-db/main/authorsdb.json';\nconst axios = require('axios');\n\nexport const getImages = () => axios.get(`${IMAGESAPI}`);\nexport const getAuthors = () => axios.get(`${AUTHORSAPI}`);","import React, { useCallback, useEffect, useState } from 'react';\nimport ImageGridContainer from '../src/pages/ImageGridContainer';\nimport { SiteDataContext } from '../src/utils/context';\nimport { getAuthors, getImages } from './api/request';\nimport './assets/fonts/stylesheet.css';\nimport './styles/AboutModalContent.css';\nimport './styles/AdvancedSearch.css';\nimport './styles/App.css';\nimport './styles/FramedModalContent.css';\nimport './styles/reset.css';\nimport './styles/Spinner.css';\nimport { generateSearchData, getQueryParam } from './utils/utils';\n\nfunction normalizeData(data) {\n  let noramlizedData = [];\n\n  const entries = Object.entries(data._default);\n\n  entries.forEach((item) => {\n    const id = item[0];\n    let attributes = item[1];\n    noramlizedData.push({ id, ...attributes });\n  });\n\n  return noramlizedData;\n}\n\nfunction App() {\n  const [siteData, setSiteData] = useState({ imageData: [], authorData: [], searchData:{} });\n  const [initialized, setInitialized] = useState(false);\n  const [bgImageContainer, setBgImageContainer] = useState(null);\n\n  const imageIdParam = getQueryParam('imageId');\n  const imageId = imageIdParam && parseInt(imageIdParam);\n\n  const setBackground = useCallback((imageObject) => {\n      if (!imageObject) {\n        return;\n      }\n      const bgImage = imageObject.thumbnailUrl;\n      bgImageContainer.style.backgroundImage = `url('${bgImage}')`;\n    },\n    [bgImageContainer],\n  );\n\n  const getData = async () => {\n    setInitialized(true);\n    const imagesResponse = await getImages({});\n    const authorsResponse = await getAuthors({});\n    const normalizedImages = normalizeData(imagesResponse.data);\n    const normalizedAuthors = normalizeData(authorsResponse.data);\n\n    for (let i = 0; i < normalizedImages.length; i++) {\n      normalizedImages[i].authorid = normalizedImages[i].author;\n      const authorName = normalizedAuthors.find(\n        (author) => author.authorid === normalizedImages[i].authorid,\n      ).authorNick;\n      normalizedImages[i].author = authorName;\n      normalizedImages[i].game = normalizedImages[i].gameName;\n      normalizedImages[i].epochtime = normalizedImages[i].epochTime;\n    }\n\n    const populatedSearchData = generateSearchData(normalizedImages);\n\n    setSiteData({ imageData: normalizedImages, authorData: normalizedAuthors, searchData: populatedSearchData });\n  };\n\n  useEffect(() => {\n    const { imageData } = siteData;\n\n    !initialized && getData();\n    imageData.length &&\n      !bgImageContainer &&\n      setBgImageContainer(document.querySelector('.bg-blur'));\n    if (imageData.length && bgImageContainer) {\n      const randomImageIndex = imageId\n        ? imageData.findIndex((e) => e.epochtime === imageId)\n        : Math.floor(Math.random() * Math.floor(imageData.length - 1));\n      setBackground(imageData[randomImageIndex]);\n    }\n  }, [bgImageContainer, siteData, initialized, setBackground, imageId]);\n\n  return (\n    <div className=\"image-grid\">\n      {siteData.imageData.length > 0 && \n      siteData.authorData.length > 0 && \n      siteData.searchData.hasOwnProperty('searchOptions') && (\n        <SiteDataContext.Provider value={siteData}>\n          <ImageGridContainer imageId={imageId} pageSize={200} setBgImage={setBackground} />\n        </SiteDataContext.Provider>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { createBrowserHistory } from 'history';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Router } from 'react-router-dom';\nimport App from './App';\nimport './index.css';\nimport reportWebVitals from './reportWebVitals';\n\nconst history = createBrowserHistory();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router {...{ history }}>\n    <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}